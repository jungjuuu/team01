<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper-team01">



    <!-- 카테고리 번호에 따른 상품 목록을 조회하는 쿼리 -->
    <select id="getProductsByCategory" parameterType="int" resultType="com.cream.team01.vo.ProductVO">
        SELECT product_no, product_name, product_image, product_price, category_no, seller_no
        FROM products
        WHERE category_no = #{categoryNo}
    </select>
    
    <select id="getProductByNo" resultType="com.cream.team01.vo.ProductVO">
        SELECT * FROM products WHERE product_no = #{productNo}
    </select>
    
    <!-- 상품 추가 쿼리 -->
    <insert id="addProduct" parameterType="com.cream.team01.vo.ProductVO">
        INSERT INTO products (product_name, product_price, category_no, seller_no, product_image)
        VALUES (#{productName}, #{productPrice}, #{categoryNo}, #{sellerNo}, #{productImage})
    </insert>
    
    <!-- 상품 수정 -->
    <update id="updateProduct" parameterType="com.cream.team01.vo.ProductVO">
        UPDATE products
        SET product_name = #{productName}, product_price = #{productPrice}, 
            category_no = #{categoryNo}, product_image = #{productImage}
        WHERE product_no = #{productNo}
    </update>

    <!-- 상품 삭제 -->
    <delete id="deleteProduct" parameterType="int">
        DELETE FROM products WHERE product_no = #{productNo}
    </delete>


	<!-- 회원 가입 id, password -->
	<insert id="createAccount" parameterType="com.cream.team01.vo.AccountVO">
	    INSERT INTO accounts (account_id, account_password)
	    VALUES (#{accountId}, #{accountPassword});
	</insert>
	
	<!-- 멤버 회원가입 -->
	<insert id="createMember" parameterType="com.cream.team01.vo.MemberVO">
	    INSERT INTO members (member_name, member_age, member_mobile, member_address)
	    VALUES (#{memberName}, #{memberAge}, #{memberMobile}, #{memberAddress});
	</insert>


<!-- 	<insert id="" parameterType=""> id : dao의 메서드 이름과 같음		
	</insert>
	
	<select id="" resultType="">	 resultType: 받는 값		
	</select>
	
	
	<delete id="" parameterType="">	
	</delete>
	
	<update id="" parameterType=""> id는 dao의 메서드
		<set>
			<if test=""></if>
		</set>
	</update> -->
	
	
	<!-- ID로 회원 정보 조회 -->
	<select id="selectAccount" parameterType="String" resultType="com.cream.team01.vo.AccountVO">
	    SELECT * FROM accounts 
	    WHERE account_id = #{accountId}
	    AND account_password = #{accountPassword}
	</select>
	
	
	<!-- 이름과 전화번호로 아이디 찾기 -->
	 <select id="findId" parameterType="com.cream.team01.vo.MemberVO" resultType="com.cream.team01.vo.AccountVO">
	    SELECT a.account_id
		FROM accounts a
		JOIN members m ON m.account_no = a.account_no
		WHERE m.member_name = #{memberName}
		AND m.member_mobile = #{memberMobile}
	</select>

	
</mapper>